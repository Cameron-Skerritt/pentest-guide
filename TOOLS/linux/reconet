#! /usr/bin/env python3
import urllib.request
import os, time

def ct():
    t = time.localtime()
    current_time = time.strftime("%H:%M:%S", t)
    return current_time

def checknet():
    try:
        urllib.request.urlopen('http://mypage.meghbelabroadband.in', timeout=1)
        return True
    except (urllib.request.URLError):
        return False
    except:
        return False

num=1
def reset():
    global num
    if not checknet():
        print("Reset Number: " + str(num)+ " at "+ ct())
        os.system("ifconfig enp1s0 down && sleep 2 && ifconfig enp1s0 up")
        num=num+1
while True:
    reset()
    time.sleep(10)
