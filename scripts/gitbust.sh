#!/bin/bash

# Print profile links
printf "\n\nProfile: https://zishanadthandar.github.io\nLinkTree: https://zishanadthandar.github.io/linktree\nLinkedIn: https://linkedin.com/in/zishanadthandar\n\n"

# Check if filename is provided
if [ -z "$1" ]; then
    echo "Usage: $0 filename"
    exit 1
fi

filename=$1
base="${filename%.*}"
outfile="${base}.comgitbust.txt"

echo "Input file: $filename"
echo "Output file: $outfile"

# Function to process the file
function main {
    while IFS= read -r line; do
        line=$(echo "$line" | tr -d '\n')
        
        if [[ "$line" != http* ]]; then
            line="http://$line"
        fi
        
        if [[ "${line: -1}" == "/" ]]; then
            line="${line:0:-1}"
        fi
        
        flink="$line/.git"
        echo -n "$flink "

        if curl --head --silent --fail "$flink" > /dev/null; then
            echo "found"
            echo "$flink" >> "$outfile"
        else
            echo "not found"
        fi
    done < "$filename"
}

main
